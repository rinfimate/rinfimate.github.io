<html>
    <head>
        <title>
            QikPod Bluetooth
        </title>
        <script type="text/javascript">
            function connect() {
                let serviceUuid = "6E400001-B5A3-F393-E0A9-E50E24DCCA9E";
                //RX - 6E400002-B5A3-F393-E0A9-E50E24DCCA9E
                //TX - 6E400003-B5A3-F393-E0A9-E50E24DCCA9E
                alert('Requesting Bluetooth Device...');
                navigator.bluetooth.requestDevice({filters: [{services: [serviceUuid]}]})
                .then(device => {
                    alert('Connecting to GATT Server...');
                    return device.gatt.connect();
                })
                .then(server => {
                    alert('Getting Service...');
                    return server.getPrimaryService(serviceUuid);
                })
                .then(service => {
                    alert('Getting Characteristics...');
                    // Get all characteristics.
                    return service.getCharacteristics();
                })
                .then(characteristics => {
                    alert('> Characteristics: ' +
                    characteristics.map(c => c.uuid).join('\n' + ' '.repeat(19)));
                })
                .catch(error => {
                    alert('Argh! ' + error);
                });
            }
        </script>
    </head>
    <body>
        <button onclick="connect()">Connect</button>
    </body>
</html>
